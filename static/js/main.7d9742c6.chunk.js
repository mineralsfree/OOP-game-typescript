(window["webpackJsonpoop-typescript"]=window["webpackJsonpoop-typescript"]||[]).push([[0],[,,,,,,,,,,,function(t,e,a){t.exports=a(22)},,,,,function(t,e,a){},function(t,e,a){},,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var i=a(0),n=a.n(i),r=a(8),c=a.n(r),o=(a(16),a(9)),s=a(1),u=a(2),l=a(4),h=a(3),d=a(5),f=(a(17),a(10)),v=function(){function t(e,a,i,n,r,c){Object(s.a)(this,t),this.damage=void 0,this.maxHP=void 0,this.initiative=void 0,this.attackable=void 0,this._HP=void 0,this.team=void 0,this.dead=void 0,this.type=void 0,this.active=void 0,this.x=void 0,this.y=void 0,this.id=void 0,this.hexed=void 0,this.name=void 0,this.actionBehavior=void 0,this.attackPossibility=void 0,this.maxHP=e,this.damage=a,this.initiative=i,this._HP=e,this.team=r,this.type=n,this.id=t.getID(),this.x=0,this.y=0,this.active=!1,this.dead=!1,this.attackable=!1,this.name=c,this.hexed=!1}return Object(u.a)(t,[{key:"HP",set:function(t){t<0&&(this.dead=!0),this._HP=Math.min(t,this.maxHP)},get:function(){return this._HP}}]),Object(u.a)(t,[{key:"getAttackCoordinates",value:function(t){var e=[];return t.forEach(function(t,a){t.forEach(function(t,a){t.dead||e.push({x:t.x,y:t.y})})}),e}},{key:"dealDamage",value:function(t,e){t.HP-=this.damage}}],[{key:"getID",value:function(){return t.i++}}]),t}();v.i=0;var m={maxHP:150,damage:50,initiative:9,type:"melee",name:"Berserk"},b={maxHP:90,damage:40,initiative:12,name:"Archer",type:"range"},y={maxHP:50,damage:20,initiative:228,name:"Mage",type:"Mage"},g={maxHP:85,damage:0,name:"Hexer",initiative:2211,type:"hexer"},O={maxHP:75,damage:50,name:"WitchDoctor",initiative:1,type:"healer"},k=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,O.maxHP,O.damage,O.initiative,O.type,t,O.name))).actionBehavior=void 0,a.attackPossibility=void 0,a.attackPossibility=new x,a.actionBehavior=new P,a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"dealDamage",value:function(t,e){t.HP+=O.damage}}]),e}(v),p=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,[{key:"getActionBehaviorType",value:function(){return"Hex"}},{key:"hex",value:function(t){t.hexed=!0}}]),t}(),j=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,[{key:"dealDamage",value:function(t,e,a){e.HP-=a.damage}},{key:"getActionBehaviorType",value:function(){return"Attack"}}]),t}(),A=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,[{key:"dealDamage",value:function(t,e,a){t.forEach(function(t){return t.HP-=a.damage})}},{key:"getActionBehaviorType",value:function(){return"Attack"}}]),t}(),P=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,[{key:"heal",value:function(t,e){t.HP+=e.damage}},{key:"getActionBehaviorType",value:function(){return"Heal"}}]),t}(),x=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,[{key:"getActionTargets",value:function(t,e,a){var i=[];return(a instanceof k?e:t).forEach(function(t,e){t.forEach(function(t,e){t.dead||i.push(t)})}),i}}]),t}(),B=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,[{key:"getActionTargets",value:function(t,e,a){var i=function(){for(var e=0;e<t.length;e++)for(var a=0;a<t[0].length;a++)if(!t[e][a].dead)return e;return 0}(),n=t[0].length,r=(t.length,[]);if(0===a.y){if(0===a.x&&!t[i][a.x].dead)return[t[i][0],t[i][1]];if(a.x===n-1&&!t[i][a.x].dead)return[t[i][n-1],t[i][n-2]];for(var c=0;c<n;c++)t[i][c].dead||r.push(t[i][c]);return r}return r}}]),t}(),w=m,E=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,w.maxHP,w.damage,w.initiative,w.type,t,w.name))).actionBehavior=void 0,a.attackPossibility=void 0,a.attackPossibility=new B,a.actionBehavior=new j,a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"getAttackCoordinates",value:function(t){var e=function(){for(var e=0;e<t.length;e++)for(var a=0;a<t[0].length;a++)if(!t[e][a].dead)return e;return 0}(),a=t[0].length,i=(t.length,[]);if(0===this.y){if(0===this.x&&!t[e][this.x].dead)return[{x:0,y:e},{x:1,y:e}];if(this.x===a-1&&!t[e][this.x].dead)return[{x:a-1,y:e},{x:a-2,y:e}];for(var n=0;n<a;n++)t[e][n].dead||i.push({x:n,y:e});return i}return i}}]),e}(v),H=y,D=b,T=3,U=function(t,e){var a=t+Math.random()*(e+1-t);return Math.floor(a)},M=g,C={1:function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,H.maxHP,H.damage,H.initiative,H.type,t,H.name))).attackPossibility=void 0,a.actionBehavior=void 0,a.attackPossibility=new x,a.actionBehavior=new A,a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"dealDamage",value:function(t,e){e&&e.dealMageDamage(this.damage)}}]),e}(v),2:function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,D.maxHP,D.damage,D.initiative,D.type,t,D.name))).attackPossibility=void 0,a.actionBehavior=void 0,a.attackPossibility=new x,a.actionBehavior=new j,a}return Object(d.a)(e,t),e}(v),3:k,4:function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(h.a)(e).call(this,M.maxHP,M.damage,M.initiative,M.type,t,M.name))).actionBehavior=void 0,a.attackPossibility=void 0,a.attackPossibility=new x,a.actionBehavior=new p,a}return Object(d.a)(e,t),e}(v),5:E},N=function(t){for(var e,a,i=[],n=[],r=0;r<T;r++)e=U(1,4),a=new C[e](t),i.push(a),a.x=r,a.y=0,e=U(1,3),(a=new C[e](t)).x=r,a.y=1,n.push(a);return[i,n]},S=function(){function t(e,a){Object(s.a)(this,t),this.field=void 0,this.team=void 0,this.flatArr=void 0,this.team=e,this.field=a||N(e),this.flatArr=this.field.flat()}return Object(u.a)(t,[{key:"getUnitsSortedByHealthPoints",value:function(){return this.flatArr.sort(function(t,e){return t.HP>e.HP?1:-1})}},{key:"getUnitByID",value:function(t){return this.flatArr.filter(function(e){return e.id===t})[0]}},{key:"dealMageDamage",value:function(t){this.flatArr.forEach(function(e){e.HP-=t})}},{key:"teamAlive",value:function(){return this.flatArr.filter(function(t){return!t.dead}).length>0}},{key:"resetValueOfUnit",value:function(t){this.field.forEach(function(e,a){e.forEach(function(e,a){e[t]=!1})})}}]),t}(),F=function(t,e){return t.initiative>e.initiative?-1:t.initiative<e.initiative?1:Math.random()<.5?1:-1},V=function(){function t(){Object(s.a)(this,t),this.order=void 0,this.round=void 0,this.activeUnit=void 0,this.fieldA=void 0,this.fieldB=void 0,this.fieldA=new S("A",null),this.fieldB=new S("B",null),this.order=this.fieldA.flatArr.concat(this.fieldB.flatArr).sort(F),this.activeUnit=this.order[0],this.round=1}return Object(u.a)(t,[{key:"getNextAttackingWarior",value:function(){this.fieldA.resetValueOfUnit("active"),this.fieldB.resetValueOfUnit("active");for(var t=this.order.shift();t&&t.dead;)t=this.order.shift();return t?(t.active=!0,this.activeUnit=t,t):(this.nextRound(),this.getNextAttackingWarior())}},{key:"nextRound",value:function(){this.order=this.fieldA.flatArr.concat(this.fieldB.flatArr).sort(F).filter(function(t){return!t.hexed||(t.hexed=!t.hexed)}),this.round++}},{key:"gameOver",value:function(){return!this.fieldB.teamAlive()||!this.fieldA.teamAlive()}},{key:"dealDamage",value:function(t){var e=this.activeUnit,a=this.getFieldToAttack(e),i=Object(f.a)(a,2),n=i[0],r=i[1],c=e.attackPossibility.getActionTargets(n.field,r.field,e).filter(function(e){return e.id===t})[0];return c&&!c.dead&&c.attackable?(e.actionBehavior instanceof P?e.actionBehavior.heal(c,e):e.actionBehavior instanceof A||e.actionBehavior instanceof j?e.actionBehavior.dealDamage(n.flatArr,c,e):e.actionBehavior instanceof p&&e.actionBehavior.hex(c),1):0}},{key:"getFieldToAttack",value:function(t){return"A"===t.team?[this.fieldB,this.fieldA]:[this.fieldA,this.fieldB]}},{key:"DisplayPossibleUnitsToAttack",value:function(t){var e,a;this.fieldB.resetValueOfUnit("attackable"),this.fieldA.resetValueOfUnit("attackable"),"A"===t.team?(e=this.fieldA.field,a=this.fieldB.field):(e=this.fieldB.field,a=this.fieldA.field),t.attackPossibility.getActionTargets(a,e,t).forEach(function(t){t.dead||(t.attackable=!0)})}}]),t}(),W=a(6),I=(a(19),a(20),Object(W.cn)("cell")),R=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.warrior,e=[I(t.name.toLowerCase()),I("container"),t.active?I("active"):"",t.attackable?I("attackable"):"",t.dead?I("dead"):"",t.hexed?I("hexed"):""];return n.a.createElement("div",{className:e.join(" ")},t.id,t.dead?"":n.a.createElement("span",{className:I("health"),style:{width:"".concat(t.HP/t.maxHP*100,"%")}}))}}]),e}(i.Component),_=Object(W.cn)("field"),G=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props.field.field,a=this.props.reverse,i=(this.props.reverse?e.slice().reverse():e).map(function(e,a){var i=[];return e.forEach(function(e,a){i.push(n.a.createElement("div",{key:a,className:_("cell"),id:""+e.id,onClick:function(){return t.props.attack(e.id)}},n.a.createElement(R,{key:a,warrior:e})))}),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{key:a},i))});return n.a.createElement("div",{className:_("container")},a?"":n.a.createElement("hr",null),i)}}]),e}(i.Component),J=(a(21),Object(W.cn)("stack")),L=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.stack.map(function(t,e){return n.a.createElement(n.a.Fragment,null,t.dead?n.a.createElement(n.a.Fragment,null):n.a.createElement("div",null," ",t.team," ",n.a.createElement(R,{warrior:t})))});return n.a.createElement("div",{className:J("container")},t)}}]),e}(i.Component);function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(a,!0).forEach(function(e){Object(o.a)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var q=function(t){function e(){var t,a;Object(s.a)(this,e);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(a=Object(l.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(n)))).state={game:new V,gameOver:!1},a.DisplayPossibleUnitsToAttack=function(){a.state.game.DisplayPossibleUnitsToAttack(a.state.game.getNextAttackingWarior()),a.update()},a.handleAttackClick=function(t){var e=a.state.game;e.dealDamage(t)?(e.gameOver()&&a.setState($({},a.state,{gameOver:!a.state.gameOver})),a.DisplayPossibleUnitsToAttack()):alert("\u0447\u0435\u043b \u0442\u044b...")},a.update=function(){a.setState($({},a.state,{game:a.state.game}))},a}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.DisplayPossibleUnitsToAttack()}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},this.state.gameOver?"GAME OVER, PRESS F5 To PLAY AGAIN":"Round : ".concat(this.state.game.round),n.a.createElement(L,{stack:this.state.game.order}),n.a.createElement("div",null,"TEAM A",n.a.createElement(G,{attack:this.handleAttackClick,field:this.state.game.fieldA,reverse:!0}),n.a.createElement(G,{attack:this.handleAttackClick,field:this.state.game.fieldB}),"TEAM B")))}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.7d9742c6.chunk.js.map